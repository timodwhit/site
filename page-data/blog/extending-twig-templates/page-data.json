{"componentChunkName":"component---src-templates-post-js","path":"/blog/extending-twig-templates/","result":{"data":{"site":{"siteMetadata":{"title":"Tim Whitney"}},"markdownRemark":{"id":"488d195d-2297-595f-b5fa-66db89db66f2","excerpt":"One of the sessions I enjoyed the most was Twig: Friendly Curl Braces Invade Your Templates by KNP Labs Ryan Weaver. He discussed a lot of wonderful advantages…","html":"<p>One of the sessions I enjoyed the most was <a href=\"https://austin2014.drupal.org/session/twig-friendly-curl-braces-invade-your-templates\">Twig: Friendly Curl Braces Invade Your Templates by KNP Labs Ryan Weaver</a>. He discussed a lot of wonderful advantages to the twig templating system including: Simplified markup and declarations, Filters, and extensibility. For the first two of that list, watch his presentation however for extensibility, please read on.\nExtendable Templates</p>\n<p>In Drupal, we regularly have to override a template for some reason or another, and that template might need to only have one line changed. In Drupal 7, you would create a new file, ex: page—blog.tpl.php, and then copy all of page.tpl.php, and override. This works great until you have 5 page template overrides and you need to override the mark up in all of them. In Drupal 8, twig allows for you to “extend” a template. This means that in the page—blog.html.twig, you would have the line</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{% extends ‘themes/THEMENAME/templates/system/page.html.twig’ %}</code></pre></div>\n<p>Now, out of the box, extending core templates is only so good, because nothing is wrapped in a twig-block. What we need to do is edit the template and start wrapping the components we will want to extend in blocks.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token punctuation\">{</span><span class=\"token shell-comment comment\"># Core Example #}</span>\n<span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span>”l<span class=\"token operator\">-</span>content”<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> title_prefix <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">if</span> title <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span>h1 <span class=\"token keyword\">class</span><span class=\"token operator\">=</span>”page<span class=\"token operator\">-</span>title”<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> title <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">endif</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> title_suffix <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> tabs <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">if</span> action_links <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span>nav <span class=\"token keyword\">class</span><span class=\"token operator\">=</span>”action<span class=\"token operator\">-</span>links”<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> action_links <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>nav<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">endif</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> page<span class=\"token punctuation\">.</span>content <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token shell-comment comment\"># /.l-content #}</span></code></pre></div>\n<p>Notice above how no twig-blocks are present</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token punctuation\">{</span><span class=\"token shell-comment comment\"># Wrapped Example #}{% block content %} {# This lets us change our content block #}</span>\n  <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span>”l<span class=\"token operator\">-</span>content”<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> block title <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">{</span><span class=\"token shell-comment comment\"># Lets say we want to move the title elsewhere #}</span>\n      <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> title_prefix <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">if</span> title <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span>h1 <span class=\"token keyword\">class</span><span class=\"token operator\">=</span>”page<span class=\"token operator\">-</span>title”<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> title <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">endif</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> title_suffix <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> endblock <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> block tabs <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">{</span><span class=\"token shell-comment comment\"># Sometimes we don’t want tabs #}</span>\n      <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> tabs <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> endblock <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> block actionLinks <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">{</span><span class=\"token shell-comment comment\"># “Nahbra, action links ain’t me”}</span>\n      <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">if</span> action_links <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span>nav <span class=\"token keyword\">class</span><span class=\"token operator\">=</span>”action<span class=\"token operator\">-</span>links”<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> action_links <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>nav<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">endif</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> endblock <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> page<span class=\"token punctuation\">.</span>content <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token shell-comment comment\"># /.l-content #}</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> endblock <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>So far, nothing to crazy is happening. However, now imagine you want to extend the template and hide the title. All you would have to write is somethings like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token punctuation\">{</span><span class=\"token shell-comment comment\"># Extending the page template to override the title #}</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">extends</span> ‘themes<span class=\"token operator\">/</span><span class=\"token constant\">THEMENAME</span><span class=\"token operator\">/</span>templates<span class=\"token operator\">/</span>page<span class=\"token punctuation\">.</span>html<span class=\"token punctuation\">.</span>twig’ <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> block title <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token single-quoted-string string\">'Nice New Title for the whole world to see.'</span><span class=\"token operator\">|</span>t <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> endblock <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Notice: No markup from the original template needs to be copied, just the block that you want to extend.\nComplex Extending</p>\n<p>What if you take the above example and you want to extend the content, but you want to keep all the content of the block, except you want to change the wrapper “.l-content” to “blog-content”. If you wrote:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token punctuation\">{</span><span class=\"token shell-comment comment\"># Extending the page template to override the wrapper of content #}</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">extends</span> ‘themes<span class=\"token operator\">/</span><span class=\"token constant\">THEMENAME</span><span class=\"token operator\">/</span>templates<span class=\"token operator\">/</span>page<span class=\"token punctuation\">.</span>html<span class=\"token punctuation\">.</span>twig’ <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> block content <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span>”blog<span class=\"token operator\">-</span>wrapper”<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> page<span class=\"token punctuation\">.</span>content <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> endblock <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>The above would cause you to loose the title, action links, and tabs. Only printing out the page.content. Not the most desirable.</p>\n<p>After this, you should try to use the parent() function, this will grab the content of the parent block. The only limit of this is that the div.l-content would still be wrapping the content of the block.</p>\n<p>To achieve the removal and replacement of the div.l-content, you’ll need a small amount of trickery.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token punctuation\">{</span><span class=\"token shell-comment comment\"># Extend it like its hot #} {% block content %} {# This lets us change our content block #}</span>\n <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span>”blog<span class=\"token operator\">-</span>wrapper”<span class=\"token operator\">></span>\n <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token function\">block</span><span class=\"token punctuation\">(</span>title<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token function\">block</span><span class=\"token punctuation\">(</span>tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token function\">block</span><span class=\"token punctuation\">(</span>actionLinks<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> page<span class=\"token punctuation\">.</span>content <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token shell-comment comment\"># /.blog-wrapper #}</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> endblock <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>This will print the parent blocks content and then print page content as desired.\nOverall</p>\n<p>This is clearly a lot easier than it was with phptemplate engine and it allows for you to quickly get the desired results. If you find a flaw want more, feel free to leave a comment. To read more about extending checkout the twig documentation.</p>\n<p><em>Originally published at www.newmediadenver.com.</em></p>","frontmatter":{"title":"Extending Twig Templates.","date":"October 31, 2014","description":"An early explanation"}}},"pageContext":{"slug":"/blog/extending-twig-templates/"}}}